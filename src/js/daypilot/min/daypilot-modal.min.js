/**
@license
DayPilot Pro for JavaScript 2023.2.5592
Copyright (c) 2005 - 2023 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
if(typeof(DayPilot)==='undefined'){DayPilot={};};(function(DayPilot){if(DayPilot.ModalStatic){return;};DayPilot.ModalStatic={};DayPilot.ModalStatic.list=[];DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var $a=this.list.pop();if($a){$a.hide();}}};DayPilot.ModalStatic.remove=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){$c.splice(i,1);return;}}};DayPilot.ModalStatic.close=function($d){DayPilot.ModalStatic.result($d);DayPilot.ModalStatic.hide();};DayPilot.ModalStatic.result=function(r){var $c=DayPilot.ModalStatic.list;if($c.length>0){$c[$c.length-1].result=r;}};DayPilot.ModalStatic.displayed=function($b){var $c=DayPilot.ModalStatic.list;for(var i=0;i<$c.length;i++){if($c[i]===$b){return true;}};return false;};DayPilot.ModalStatic.stretch=function(){if(this.list.length>0){var $a=this.list[this.list.length-1];if($a){$a.stretch();}}};DayPilot.ModalStatic.last=function(){var $c=DayPilot.ModalStatic.list;if($c.length>0){return $c[$c.length-1];};return null;};var $e=function(){var style=document.createElement("style");style.setAttribute("type","text/css");if(!style.styleSheet){style.appendChild(document.createTextNode(""));};var h=document.head||document.getElementsByTagName('head')[0];h.appendChild(style);var $f=!!style.styleSheet;var $g={};$g.rules=[];$g.commit=function(){try{if($f){style.styleSheet.cssText=this.rules.join("\n");}}catch(e){}};$g.add=function($h,$i,$j){if($f){this.rules.push($h+"{"+$i+"\u007d");return;};if(style.sheet.insertRule){if(typeof $j==="undefined"){$j=style.sheet.cssRules.length;};style.sheet.insertRule($h+"{"+$i+"\u007d",$j);}else if(style.sheet.addRule){style.sheet.addRule($h,$i,$j);}else{throw "No CSS registration method found";}};$g.print=function(){var $i=style.sheet.cssRules;var $k=[];for(var i=0;i<$i.length;i++){$k.push($i[i].cssText);};return $k.join("\n");};return $g;};var $l="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg==";var $m="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K";var $g=new $e();$g.add(".modal_default_main","border: 10px solid #ccc; max-width: 90%;");$g.add(".modal_default_main:focus","outline: none;");$g.add(".modal_default_content","padding: 10px 0px;");$g.add(".modal_default_inner","padding: 20px;");$g.add(".modal_default_input","padding: 10px 0px;");$g.add(".modal_default_buttons","margin-top: 10px;");$g.add(".modal_default_buttons","padding: 10px 0px;");$g.add(".modal_default_form_item","padding: 10px 0px; position: relative;");$g.add(".modal_default_form_item_level1","border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;");$g.add(".modal_default_form_item.modal_default_form_title","font-size: 1.5rem; font-weight: bold;");$g.add(".modal_default_form_item input[type=text]","width: 100%; box-sizing: border-box;");$g.add(".modal_default_form_item textarea","width: 100%; height: 200px; box-sizing: border-box;");$g.add(".modal_default_form_item input[type=select]","width: 100%; box-sizing: border-box;");$g.add(".modal_default_form_item label","display: block;");$g.add(".modal_default_form_item select","width: 100%; box-sizing: border-box;");$g.add(".modal_default_form_item_label","margin: 2px 0px;");$g.add(".modal_default_form_item_image img","max-width: 100%; height: auto;");$g.add(".modal_default_form_item_invalid","");$g.add(".modal_default_form_item_invalid_message","position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;");$g.add(".modal_default_background","opacity: 0.5; background-color: #000;");$g.add(".modal_default_ok","padding: 3px; width: 80px;");$g.add(".modal_default_cancel","padding: 3px; width: 80px;");$g.add(".modal_default_form_item_date","position: relative;");$g.add(".modal_default_form_item_date:after","content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url("+$l+")");if(navigator.userAgent.indexOf("Edge")!==-1){$g.add(".modal_default_form_item_date input::-ms-clear","display: none;");};$g.add(".modal_default_form_item_scrollable_scroll","width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;");$g.add(".modal_default_form_item_scrollable_scroll_content","padding: 5px;");$g.add(".modal_default_form_item_searchable","position: relative;");$g.add(".modal_default_form_item_searchable_icon","");$g.add(".modal_default_form_item_searchable_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+$m+");");$g.add(".modal_default_form_item_searchable_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;");$g.add(".modal_default_form_item_searchable_list_item","background: white; padding: 2px; cursor: default;");$g.add(".modal_default_form_item_searchable_list_item_highlight","background: #ccc;");$g.add(".modal_default_form_item_time","position: relative;");$g.add(".modal_default_form_item_time_icon","");$g.add(".modal_default_form_item_time_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+$m+");");$g.add(".modal_default_form_item_time_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;");$g.add(".modal_default_form_item_time_list_item","background: white; padding: 2px; cursor: default;");$g.add(".modal_default_form_item_time_list_item_highlight","background: #ccc;");$g.add(".modal_default_form_item_datetime_parent","display: flex;");$g.add(".modal_default_form_item_datetime .modal_default_form_item_time_main","margin-left: 5px;");$g.add(".modal_default_form_item_datetime input[type='text'].modal_default_input_date ","");$g.add(".modal_default_form_item_tabular_main","margin-top: 10px;");$g.add(".modal_default_form_item_tabular_table","display: table; width: 100%; xbackground-color: #fff; border-collapse: collapse;");$g.add(".modal_default_form_item_tabular_tbody","display: table-row-group;");$g.add(".modal_default_form_item_tabular_row","display: table-row;");$g.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header","");$g.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction","padding: 0px; width: 23px;");$g.add(".modal_default_form_item_tabular_cell","display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;");$g.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell","padding-left: 0px; padding-bottom: 0px;");$g.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]","width:100%; box-sizing: border-box;");$g.add(".modal_default_form_item_tabular_table select","width:100%; height:100%; box-sizing: border-box;");$g.add(".modal_default_form_item_tabular_plus","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;");$g.add(".modal_default_form_item_tabular_plus:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:$n/$o+$p;$q,$r+$s==\")");$g.add(".modal_default_form_item_tabular_delete","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;");$g.add(".modal_default_form_item_tabular_delete:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:$n/$o+$p;$q,$r+$t==\")");$g.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus","display: none;");$g.add(".modal_default_form_item_tabular_plus_max.modal_default_form_item_tabular_plus","display: none;");$g.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete","visibility: hidden;");$g.add(".modal_default_form_item_tabular_empty","height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;");$g.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell","padding: 0px;");$g.add(".modal_min_main","border: 1px solid #ccc; max-width: 90%;");$g.add(".modal_min_background","opacity: 0.5; background-color: #000;");$g.add(".modal_min_ok","padding: 3px 10px;");$g.add(".modal_min_cancel","padding: 3px 10px;");$g.add(".navigator_modal_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;");$g.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after","box-sizing: content-box;");$g.add(".navigator_modal_month","font-size: 11px;");$g.add(".navigator_modal_day","color: black;");$g.add(".navigator_modal_weekend","background-color: #f0f0f0;");$g.add(".navigator_modal_dayheader","color: black;");$g.add(".navigator_modal_line","border-bottom: 1px solid #c0c0c0;");$g.add(".navigator_modal_dayother","color: gray;");$g.add(".navigator_modal_todaybox","border: 1px solid red;");$g.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright",'border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;');$g.add(".navigator_modal_busy","font-weight: bold;");$g.add(".navigator_modal_cell","text-align: center;");$g.add(".navigator_modal_select .navigator_modal_cell_box","background-color: #FFE794; opacity: 0.5;");$g.add(".navigator_modal_title","text-align: center;");$g.add(".navigator_modal_titleleft, .navigator_modal_titleright","text-align: center;");$g.add(".navigator_modal_dayheader","text-align: center;");$g.add(".navigator_modal_weeknumber","text-align: center;");$g.add(".navigator_modal_cell_text","cursor: pointer;");$g.commit();DayPilot.Modal=function($u){this.autoFocus=true;this.focus=null;this.autoStretch=true;this.autoStretchFirstLoadOnly=false;this.className=null;this.theme="modal_default";this.disposeOnClose=true;this.dragDrop=true;this.loadingHtml=null;this.maxHeight=null;this.scrollWithPage=true;this.useIframe=true;this.zIndex=99999;this.left=null;this.width=600;this.top=20;this.height=200;this.locale=null;this.closed=null;this.onClose=null;this.onClosed=null;this.onShow=null;var $v=this;this.id='_'+new Date().getTime()+'n'+(Math.random()*10);this.$2k=false;this.$2l=null;this.$2m=null;this.showHtml=function($w){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(!this.div){this.$2n();};this.$2o();if(this.useIframe){var $x=function(p,$y){return function(){p.setInnerHTML(p.id+"iframe",$y);};};window.setTimeout($x(this,$w),0);}else{if($w.nodeType){this.div.appendChild($w);}else{this.div.innerHTML=$w;}};this.$2o();this.$2p();this.$2q();};this.showUrl=function($z){if(DayPilot.ModalStatic.displayed(this)){throw "This modal dialog is already displayed.";};if(this.useIframe){if(!this.div){this.$2n();};var $A=this.loadingHtml;if($A){this.iframe.src="about:blank";this.setInnerHTML(this.id+"iframe",$A);};this.re(this.iframe,"load",this.$2r);this.iframe.src=$z;this.$2o();this.$2p();this.$2q();}else{$v.$2s({"url":$z,"success":function($B){var $w=$B.request.responseText;$v.showHtml($w);},"error":function($B){$v.showHtml("Error loading the modal dialog");}});}};this.$2q=function(){if(typeof $v.onShow==="function"){var $B={};$B.root=$v.$2t();$B.modal=$v;$v.onShow($B);}};this.$2t=function(){return $v.iframe?$v.iframe.contentWindow.document:$v.div;};this.$2s=function($C){var $D=new XMLHttpRequest();if(!$D){return;};var $E=$C.method||"GET";var $F=$C.success||function(){};var $G=$C.error||function(){};var $H=$C.data;var $z=$C.url;$D.open($E,$z,true);$D.setRequestHeader('Content-type','text/plain');$D.onreadystatechange=function(){if($D.readyState!==4)return;if($D.status!==200&&$D.status!==304){if($G){var $B={};$B.request=$D;$G($B);}else{if(window.console){console.log('HTTP error '+$D.status);}};return;};var $B={};$B.request=$D;$F($B);};if($D.readyState===4){return;};if(typeof $H==='object'){$H=JSON.stringify($H);};$D.send($H);};this.$2o=function(){delete this.result;var $I=window;var $J=document;var scrollY=$I.pageYOffset?$I.pageYOffset:(($J.documentElement&&$J.documentElement.scrollTop)?$J.documentElement.scrollTop:$J.body.scrollTop);var $K=function(){return $v.$2u().y;};if(this.theme){this.hideDiv.className=this.theme+"_background";};if(this.zIndex){this.hideDiv.style.zIndex=this.zIndex;};this.hideDiv.style.display='';window.setTimeout(function(){if($v.hideDiv){$v.hideDiv.onclick=function(){$v.hide({"backgroundClick":true});};}},500);if(this.theme){this.div.className=this.theme+"_main";}else{this.div.className="";};if(this.className){this.div.className+=" "+this.className;};if(this.left){this.div.style.left=this.left+"px";}else{this.div.style.marginLeft='-'+Math.floor(this.width/2)+"px";};this.div.style.position='absolute';this.div.style.boxSizing="content-box";this.div.style.top=(scrollY+this.top)+'px';this.div.style.width=this.width+'px';if(this.zIndex){this.div.style.zIndex=this.zIndex;};if(this.height){if(this.useIframe||!this.autoStretch){this.div.style.height=this.height+'px';}else{this.div.style.height='';}};if(this.useIframe&&this.height){this.iframe.style.height=(this.height)+'px';};this.div.style.display='';this.$2v();DayPilot.ModalStatic.remove(this);DayPilot.ModalStatic.list.push(this);};this.$2r=function(){$v.iframe.contentWindow.modal=$v;if($v.autoStretch){$v.stretch();}};this.stretch=function(){var $K=function(){return $v.$2u().y;};var $L=function(){return $v.$2u().x;};if(this.useIframe){var $M=$L()-40;for(var w=this.width;w<$M&&this.$2w();w+=10){this.div.style.width=w+'px';this.div.style.marginLeft='-'+Math.floor(w/2)+"px";};var $N=this.maxHeight||$K()-2*this.top;for(var h=this.height;h<$N&&this.$2x();h+=10){this.iframe.style.height=(h)+'px';this.div.style.height=h+'px';};if(this.autoStretchFirstLoadOnly){this.ue(this.iframe,"load",this.$2r);}}else{this.div.style.height='';}};this.$2w=function(){var document=this.iframe.contentWindow.document;var $O=document.compatMode==='BackCompat'?document.body:document.documentElement;var $P=$O.scrollWidth;var $Q=document.body.children;for(var i=0;i<$Q.length;i++){var $R=$Q[i].offsetLeft+$Q[i].offsetWidth;$P=Math.max($P,$R);};var $S=$P>$O.clientWidth;return $S;};this.$2x=function(){var document=this.iframe.contentWindow.document;var $O=document.compatMode==='BackCompat'?document.body:document.documentElement;var $T=$O.scrollHeight;var $Q=document.body.children;for(var i=0;i<$Q.length;i++){var $R=$Q[i].offsetTop+$Q[i].offsetHeight;$T=Math.max($T,$R);};var $U=$T>$O.clientHeight;return $U;};this.$2u=function(){var $J=document;if($J.compatMode==="CSS1Compat"&&$J.documentElement&&$J.documentElement.clientWidth){var x=$J.documentElement.clientWidth;var y=$J.documentElement.clientHeight;return{x:x,y:y};}else{var x=$J.body.clientWidth;var y=$J.body.clientHeight;return{x:x,y:y};}};this.$2p=function(){if(this.$2k){return;};this.re(window,'resize',this.$2y);this.re(window,'scroll',this.$2z);if(this.dragDrop){this.re(document,'mousemove',this.$2A);this.re(document,'mouseup',this.$2B);};this.$2k=true;};this.$2C=function(){this.ue(window,'resize',this.$2y);this.ue(window,'scroll',this.$2z);if(this.dragDrop){this.ue(document,'mousemove',this.$2A);this.ue(document,'mouseup',this.$2B);};this.$2k=false;};this.$2D=function(e){if(e.target!==$v.div){return;};e.preventDefault();$v.div.style.cursor="move";$v.$2E();$v.$2m=$v.mc(e||window.event);$v.$2l={x:$v.div.offsetLeft,y:$v.div.offsetTop};};this.$2A=function(e){if(!$v.$2m){return;};var e=e||window.event;var $V=$v.mc(e);var x=$V.x-$v.$2m.x;var y=$V.y-$v.$2m.y;$v.div.style.marginLeft='0px';$v.div.style.top=($v.$2l.y+y)+"px";$v.div.style.left=($v.$2l.x+x)+"px";};this.$2B=function(e){if(!$v.$2m){return;};$v.$2F();$v.div.style.cursor=null;$v.$2m=null;};this.$2E=function(){if(!this.useIframe){return;};var $W=80;var $X=document.createElement("div");$X.style.backgroundColor="#ffffff";$X.style.filter="alpha(opacity="+$W+")";$X.style.opacity="0."+$W;$X.style.width="100%";$X.style.height=this.height+"px";$X.style.position="absolute";$X.style.left='0px';$X.style.top='0px';this.div.appendChild($X);this.mask=$X;};this.$2F=function(){if(!this.useIframe){return;};this.div.removeChild(this.mask);this.mask=null;};this.$2y=function(){$v.$2G();$v.$2v();};this.$2z=function(){$v.$2G();};this.$2v=function(){if($v.left){return;};if(!$v.div){return;};var $L=$v.div.offsetWidth;$v.div.style.marginLeft='-'+Math.floor($L/2)+"px";};this.$2G=function(){if(!$v.hideDiv){return;};if(!$v.div){return;};if($v.hideDiv.style.display==='none'){return;};if($v.div.style.display==='none'){return;};var scrollY=$v.$2H.scrollY();if(!$v.scrollWithPage){$v.div.style.top=(scrollY+$v.top)+'px';}};this.$2H={};this.$2H.container=function(){return $v.container||document.body;};this.$2H.scrollY=function(){var c=$v.$2H.container();if(c===document.body){return window.pageYOffset?window.pageYOffset:((document.documentElement&&document.documentElement.scrollTop)?document.documentElement.scrollTop:document.body.scrollTop);}else{return c.scrollTop;}};this.re=function(el,ev,$Y){if(el.addEventListener){el.addEventListener(ev,$Y,false);}else if(el.attachEvent){el.attachEvent("on"+ev,$Y);}};this.ue=function(el,ev,$Y){if(el.removeEventListener){el.removeEventListener(ev,$Y,false);}else if(el.detachEvent){el.detachEvent("on"+ev,$Y);}};this.mc=function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY};};return{x:ev.clientX+document.documentElement.scrollLeft,y:ev.clientY+document.documentElement.scrollTop};};this.abs=function(element){var r={x:element.offsetLeft,y:element.offsetTop};while(element.offsetParent){element=element.offsetParent;r.x+=element.offsetLeft;r.y+=element.offsetTop;};return r;};this.$2n=function(){var $Z=$v.$2H.container();var $00=$Z===document.body;var $01=$00?"fixed":"absolute";var hide=document.createElement("div");hide.id=this.id+"hide";hide.style.position=$01;hide.style.left="0px";hide.style.top="0px";hide.style.right="0px";hide.style.bottom="0px";hide.oncontextmenu=function(){return false;};hide.onmousedown=function(){return false;};$Z.appendChild(hide);var $02=document.createElement("div");$02.id=this.id+'popup';$02.style.position=$01;$02.style.left='50%';$02.style.top='0px';$02.style.backgroundColor='white';$02.style.width="50px";$02.style.height="50px";if(this.dragDrop){$02.onmousedown=this.$2D;};$02.addEventListener("keydown",function(e){e.stopPropagation();});var $03=50;var $04=null;if(this.useIframe){$04=document.createElement("iframe");$04.id=this.id+"iframe";$04.name=this.id+"iframe";$04.frameBorder='0';$04.style.width='100%';$04.style.height=$03+'px';$02.appendChild($04);};$Z.appendChild($02);this.div=$02;this.iframe=$04;this.hideDiv=hide;};this.setInnerHTML=function(id,$y){var $05=window.frames[id];var $J=$05.contentWindow||$05.document||$05.contentDocument;if($J.document){$J=$J.document;};if($J.body==null){$J.write("<body></body>");};if($y.nodeType){$J.body.appendChild($y);}else{$J.body.innerHTML=$y;};if($v.autoStretch){if(!$v.autoStretchFirstLoadOnly||!$v.$2I){$v.stretch();$v.$2I=true;}}};this.close=function($d){this.result=$d;this.hide();};this.closeSerialized=function(){var $06=$v.$2t();var $07=$06.querySelectorAll("input, textarea, select");var $d={};for(var i=0;i<$07.length;i++){var $08=$07[i];var name=$08.name;if(!name){continue;};var $09=$08.value;$d[name]=$09;};$v.close($d);};this.hide=function($u){$u=$u||{};var $B={};$B.backgroundClick=!!$u.backgroundClick;$B.result=this.result;$B.canceled=typeof this.result==="undefined";$B.preventDefault=function(){this.preventDefault.value=true;};if(typeof this.onClose==="function"){this.onClose($B);if($B.preventDefault.value){return;}};if(this.div){this.div.style.display='none';this.hideDiv.style.display='none';if(!this.useIframe){this.div.innerHTML=null;}};window.focus();DayPilot.ModalStatic.remove(this);if(typeof this.onClosed==="function"){this.onClosed($B);}else if(this.closed){this.closed();};delete this.result;if(this.disposeOnClose){$v.$2C();$v._de($v.div);$v._de($v.hideDiv);$v.div=null;$v.hideDiv=null;$v.iframe=null;}};this._de=function(e){if(!e){return;};e.parentNode&&e.parentNode.removeChild(e);};this.$2J=function(){if(!$u){return;};for(var name in $u){this[name]=$u[name];}};this.$2J();};DayPilot.Modal.alert=function($0a,$u){$u=$u||{};$u.height=$u.height||40;$u.useIframe=false;var $0b=$u.okText||"OK";var $0c=$u.cancelText||"Cancel";return DayPilot.getPromise(function($F,$0d){$u.onClosed=function($B){$F($B);};var $b=new DayPilot.Modal($u);var $02=document.createElement("div");$02.className=$b.theme+"_inner";var $0e=document.createElement("div");$0e.className=$b.theme+"_content";$0e.innerHTML=$0a;var $0f=document.createElement("div");$0f.className=$b.theme+"_buttons";var $0g=document.createElement("button");$0g.innerText=$0b;$0g.className=$b.theme+"_ok";$0g.onclick=function(e){DayPilot.ModalStatic.close("OK");};$0f.appendChild($0g);$02.appendChild($0e);$02.appendChild($0f);$b.showHtml($02);if($b.autoFocus){$0g.focus();}});};DayPilot.Modal.confirm=function($0a,$u){$u=$u||{};$u.height=$u.height||40;$u.useIframe=false;var $0b=$u.okText||"OK";var $0c=$u.cancelText||"Cancel";return DayPilot.getPromise(function($F,$0d){$u.onClosed=function($B){$F($B);};var $b=new DayPilot.Modal($u);var $02=document.createElement("div");$02.className=$b.theme+"_inner";var $0e=document.createElement("div");$0e.className=$b.theme+"_content";$0e.innerHTML=$0a;var $0f=document.createElement("div");$0f.className=$b.theme+"_buttons";var $0g=document.createElement("button");$0g.innerText=$0b;$0g.className=$b.theme+"_ok";$0g.onclick=function(e){DayPilot.ModalStatic.close("OK");};var $0h=document.createTextNode(" ");var $0i=document.createElement("button");$0i.innerText=$0c;$0i.className=$b.theme+"_cancel";$0i.onclick=function(e){DayPilot.ModalStatic.close();};$0f.appendChild($0g);$0f.appendChild($0h);$0f.appendChild($0i);$02.appendChild($0e);$02.appendChild($0f);$b.showHtml($02);if($b.autoFocus){$0g.focus();}});};DayPilot.Modal.prompt=function($0a,$0j,$u){if(typeof $0j==="object"){$u=$0j;$0j="";};$u=$u||{};$u.height=$u.height||40;$u.useIframe=false;var $0b=$u.okText||"OK";var $0c=$u.cancelText||"Cancel";var $0k=$0j||"";return DayPilot.getPromise(function($F,$0d){$u.onClosed=function($B){$F($B);};var $b=new DayPilot.Modal($u);var $02=document.createElement("div");$02.className=$b.theme+"_inner";var $0e=document.createElement("div");$0e.className=$b.theme+"_content";$0e.innerHTML=$0a;var $0l=document.createElement("div");$0l.className=$b.theme+"_input";var $0m=document.createElement("input");$0m.value=$0k;$0m.style.width="100%";$0m.onkeydown=function(e){var $0n=false;switch(e.keyCode){case 13:$b.close(this.value);break;case 27:$b.close();break;default:$0n=true;break;};if(!$0n){e.preventDefault();e.stopPropagation();}};$0l.appendChild($0m);var $0f=document.createElement("div");$0f.className=$b.theme+"_buttons";var $0g=document.createElement("button");$0g.innerText=$0b;$0g.className=$b.theme+"_ok";$0g.onclick=function(e){$b.close($0m.value);};var $0h=document.createTextNode(" ");var $0i=document.createElement("button");$0i.innerText=$0c;$0i.className=$b.theme+"_cancel";$0i.onclick=function(e){$b.close();};$0f.appendChild($0g);$0f.appendChild($0h);$0f.appendChild($0i);$02.appendChild($0e);$02.appendChild($0l);$02.appendChild($0f);$b.showHtml($02);if($b.autoFocus){$0m.focus();}});};var $0o=function($0p){return Object.prototype.toString.call($0p)==='[object Array]';};function setPathValue($0q,$0r,$09){var $0s=$0r.indexOf(".");if($0s===-1){if($0r!=="__proto__"&&$0r!=="constructor"){$0q[$0r]=$09;};return;};var $0t=$0r.substring(0,$0s);if($0t==="__proto__"||$0t==="constructor"){return;};var $0u=$0r.substring($0s+1);var $0v=$0q[$0t];if(typeof $0v!=="object"||$0v===null){$0q[$0t]={};$0v=$0q[$0t];};setPathValue($0v,$0u,$09);};DayPilot.Modal.form=function($0w,$H,$u){if(arguments.length===1){var $0p=$0w;var $0x=$0o($0p);if($0x){$H={};}else if(typeof $0p==="object"){$H=$0w;$0w=[];for(var name in $H){var $0y={};$0y.name=name;$0y.id=name;$0w.push($0y);}}else{throw "Invalid DayPilot.Modal.form() parameter";}};var $0z={};for(var name in $u){$0z[name]=$u[name];};$0z.height=$0z.height||40;$0z.useIframe=false;var $0b=$0z.okText||"OK";var $0c=$0z.cancelText||"Cancel";return DayPilot.getPromise(function($F,$0d){$0z.onClosed=function($B){if($B.result){var $0A=JSON.parse(JSON.stringify($H));for(var name in $B.result){setPathValue($0A,name,$B.result[name]);};$B.result=$0A;};$F($B);};var $b=new DayPilot.Modal($0z);var $02=document.createElement("div");$02.className=$b.theme+"_inner";var $0l=document.createElement("div");$0l.className=$b.theme+"_input";var f=new Form({$0B:$b.theme,$0w:$0w,$H:$H,$0C:$b.zIndex,$0D:$b.locale,$0E:$b.plugins,$0F:function($B){switch($B.key){case "Enter":if(f.validate()){$b.close(f.serialize());};break;case "Escape":$b.close();break;}},$0G:function($B){if(typeof $b.onChange==="function"){$b.onChange($B);}}});var el=f.create();$0l.append(el);var $0f=document.createElement("div");$0f.className=$b.theme+"_buttons";var $0g=document.createElement("button");$0g.innerText=$0b;$0g.className=$b.theme+"_ok";if($0z.okDisabled){$0g.disabled=true;};$0g.onclick=function(e){if(f.validate()){$b.close(f.serialize());}};var $0h=document.createTextNode(" ");var $0i=document.createElement("button");$0i.innerText=$0c;$0i.className=$b.theme+"_cancel";$0i.onclick=function(e){$b.close();};$0i.onmousedown=function(e){f.canceling=true;};$0f.appendChild($0g);$0f.appendChild($0h);$0f.appendChild($0i);$02.appendChild($0l);$02.appendChild($0f);$b.showHtml($02);$b.div.setAttribute("tabindex","-1");$b.div.addEventListener("keydown",function(e){switch(e.keyCode){case 27:$b.close();break;case 13:if(f.validate()){$b.close(f.serialize());};break;}});if($b.focus){var $0H=null;if(typeof $b.focus==="object"){var id=$b.focus.id;var $09=$b.focus.value;$0H=f.findViewById(id,$09);}else if(typeof $b.focus==="string"){$0H=f.findViewById($b.focus)};if($0H){$0H.focus();}}else{var $0I=f.firstFocusable();if($b.autoFocus&&$0I){$0I.focus();}else{$b.div.focus();}}});};DayPilot.Modal.close=function($d){var opener=DayPilot.Modal.opener();if(!opener){return;};opener.close($d);};DayPilot.Modal.stretch=function($d){var opener=DayPilot.Modal.opener();if(!opener){throw "Unable to find the opener DayPilot.Modal instance.";};opener.stretch();};DayPilot.Modal.closeSerialized=function(){var $a=DayPilot.Modal.opener()||DayPilot.ModalStatic.last();if($a){$a.closeSerialized();}};DayPilot.Modal.opener=function(){if(typeof DayPilot!=="undefined"&&typeof DayPilot.ModalStatic!=="undefined"&&DayPilot.ModalStatic.list.length>0){return DayPilot.ModalStatic.list[DayPilot.ModalStatic.list.length-1];};return parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1];};DayPilot.Modal.Experimental={};DayPilot.Modal.Experimental.Form=Form;if(typeof DayPilot.getPromise==="undefined"){DayPilot.getPromise=function(f){if(typeof $0J!=='undefined'){return new $0J(f);};DayPilot.Promise=function(f){var p=this;this.then=function($0K,$0L){$0K=$0K||function(){};$0L=$0L||function(){};f($0K,$0L);return DayPilot.getPromise(f);};this['catch']=function($0L){p.then(null,$0L);return DayPilot.getPromise(f);};};return new DayPilot.Promise(f);};};var Form=function($u){this.form=[];this.data={};this.theme="form_default";this.zIndex=99999;this.locale="en-us";this.plugins={};this.onKey=null;this.$2K=[];this.$2L=null;this.canceling=false;this.$2M=[];this.$2N=[];this.$2O=null;$u=$u||{};for(var name in $u){this[name]=$u[name];}};Form.prototype.create=function(){this.load();this.render();return this.$2O;};Form.prototype.render=function(){var $0w=this;this.$2O=document.createElement("div");this.$2K.forEach(function($0M){$0w.createView($0M);});this.applyState();};Form.prototype.createView=function($0M){var $0B=this.theme;var $0w=this;var $02=document.createElement("div");$02.className=$0B+"_form_item "+$0B+"_form_item_level"+$0M.level;if(!$0M.interactive&&$0M.type==="title"){$02.className+=" "+$0B+"_form_title";}else{$02.className+=" "+$0B+"_form_item_"+$0M.type;};if($0M.data.cssClass){$02.className+=" "+$0M.data.cssClass;};if(!$0M.isValue){var $0N=document.createElement("div");$0N.className=$0B+"_form_item_label";$0N.innerText=$0M.text;$02.appendChild($0N);};var $0O=this.createInteractive($0M);$0O.onInput=function($u){$u=$u||{};$0w.$2P($0O,{"debounce":!$u.immediate});if(typeof $0w.onChange==="function"){var $B={};$B.result=$0w.serialize();$0w.onChange($B);}};$0O.onBlur=function(){if(!$0w.canceling){$0w.$2P($0O);}};$0O.apply($0M);$0O.$2O=$02;$0O.row=$0M;if($0O.element){$02.appendChild($0O.element);};this.$2N.push($0O);this.$2O.appendChild($02);};Form.prototype.validate=function(){var $0w=this;var $0P=true;this.$2N.forEach(function($0O){var iv=$0w.$2P($0O);$0P=$0P&&iv;});return $0P;};Form.prototype.$2P=function($0O,$u){$u=$u||{};var $0Q=$u.debounce;var $0R=$u.silent;var $0M=$0O.row;var $0P=true;var $0S=typeof $0M.data.onValidate==="function"?$0M.data.onValidate:null;var $0T=typeof $0M.data.validate==="function"?$0M.data.validate:null;var $0U=$0S||$0T;if($0U){var $B={};$B.valid=true;$B.value=$0O.save()[$0M.field];$B.message="Error";$B.values=this.serialize();$B.result=this.serialize();$0U($B);var $0V=this.theme+"_form_item_invalid";var $0W=this.theme+"_form_item_invalid_message";if($B.valid){clearTimeout(this.$2M[$0M.field]);if($0O.$2Q){$0O.$2Q.remove();$0O.$2Q=null;};$0O.$2O.classList.remove($0V);}else{function showInvalid(){if($0O.$2Q){$0O.$2Q.remove();$0O.$2Q=null;};$0O.$2O.classList.add($0V);var $0X=document.createElement("div");$0X.classList.add($0W);$0X.innerText=$B.message;$0O.$2Q=$0X;$0O.$2O.appendChild($0X);};if(!$0R){if($0Q){var $0Y=1000;clearTimeout(this.$2M[$0M.field]);this.$2M[$0M.field]=setTimeout(function(){showInvalid();},$0Y);}else{showInvalid();}}};$0P=$B.valid;};return $0P;};Form.prototype.load=function(){var t=this;this.form.forEach(function($0y){t.processFormItem($0y,0);});var $0Z;try{var $10=JSON.stringify(this.data);var $11=JSON.parse($10);$0Z=flatten($11);}catch(e){throw new Error("The 'data' object is not serializable (it may contain circular dependencies): "+e);};for(var name in $0Z){this.setValue(name,$0Z[name]);}};Form.prototype.setValue=function(name,$09){this.$2K.forEach(function($0M){$0M.applyValue(name,$09);});};Form.prototype.updateDependentState=function(){var $0w=this;var $12=[true];var $13=this.$2L?this.$2L:this.$2K;$13.forEach(function($0M){var $14=$0w.updateState($0M,{$12:$12[$0M.level]&&!$0M.data.disabled});if($14.isValue){$12[$14.level+1]=$14.enabled&&$14.checked;}});};Form.prototype.processFormItem=function($0y,$15){var $0w=this;var $16=this.getFieldType($0y);var $17=[];if($16==="radio"){if($0y.name){var $0M=new $18();$0M.field=$0y.id;$0M.data=$0y;$0M.level=$15;$0M.type="label";$0M.interactive=false;$0M.text=$0y.name;$0w.$2K.push($0M);$17.push($0M);};$0y.options.forEach(function($19){var $0M=new $18();$0M.field=$0y.id;$0M.data=$19;$0M.level=$15;$0M.type=$16;$0M.isValue=true;$0M.text=$19.name;$0M.resolved=$19.id;$0w.$2K.push($0M);$17.push($0M);if($19.children){$19.children.forEach(function($0v){var $1a=$0w.processFormItem($0v,$15+1);$17=$17.concat($1a);})}});}else if($16==="title"){var $0M=new $18();$0M.field=$0y.id;$0M.data=$0y;$0M.level=$15;$0M.type=$16;$0M.interactive=false;$0M.text=$0y.name;$0w.$2K.push($0M);$17.push($0M);}else if($16==="image"){var $0M=new $18();$0M.isValue=true;$0M.field=$0y.id;$0M.data=$0y;$0M.level=$15;$0M.type=$16;$0M.interactive=false;$0M.text=null;$0w.$2K.push($0M);$17.push($0M);}else if($16==="html"){var $0M=new $18();$0M.isValue=true;$0M.field=$0y.id;$0M.data=$0y;$0M.level=$15;$0M.type=$16;$0M.interactive=false;$0M.text=null;$0w.$2K.push($0M);$17.push($0M);}else if($16==="scrollable"){var $0M=new $18();$0M.isValue=true;$0M.field=$0y.id;$0M.data=$0y;$0M.level=$15;$0M.type=$16;$0M.interactive=false;$0M.text=null;$0w.$2K.push($0M);$17.push($0M);}else{var $0M=new $18();$0M.field=$0y.id;$0M.data=$0y;$0M.level=$15;$0M.type=$16;$0M.text=$0y.name;$0M.children=[];$0w.$2K.push($0M);$17.push($0M);};if($16==="checkbox"){$0M.isValue=true;$0M.resolved=true;if($0y.children){$0y.children.forEach(function($0v){var $1a=$0w.processFormItem($0v,$15+1);$17=$17.concat($1a);})}};return $17;};Form.prototype.doOnKey=function($1b){if(typeof this.onKey==="function"){var $B={$1b:$1b};this.onKey($B);}};Form.prototype.createInteractive=function($0M){var $0w=this;var $1c={"label":function(){return new $1d();},"title":function(){return new $1d();},"image":function(){var $0O=new $1d();var $n=document.createElement("img");$n.src=$0M.data.image;$0O.element=$n;return $0O;},"html":function(){var $0O=new $1d();var $02=document.createElement("div");if(typeof $0M.data.text==="string"){$02.innerText=$0M.data.text;}else if(typeof $0M.data.html==="string"){$02.innerHTML=$0M.data.html;};$0O.element=$02;return $0O;},"scrollable":function(){var $0O=new $1d();var scroll=document.createElement("div");scroll.className=$0w.theme+"_form_item_scrollable_scroll";if($0M.data.height){scroll.style.height=$0M.data.height+"px";};var $02=document.createElement("div");$02.className=$0w.theme+"_form_item_scrollable_scroll_content";if(typeof $0M.data.text==="string"){$02.innerText=$0M.data.text;}else if(typeof $0M.data.html==="string"){$02.innerHTML=$0M.data.html;};scroll.appendChild($02);$0O.element=scroll;return $0O;},"text":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $0m=$0O.element;$0m.value=$0M.value;$0m.disabled=!$0M.enabled;};var $0m=document.createElement("input");$0m.name=$0M.field;$0m.type="text";$0m.autocomplete="off";$0m.onkeydown=function(e){var $0n=false;switch(e.keyCode){case 13:$0w.doOnKey("Enter");break;case 27:$0w.doOnKey("Escape");break;default:$0n=true;break;};if(!$0n){e.preventDefault();e.stopPropagation();}};$0m.oninput=function(e){$0O.onInput();};$0m.onblur=function(e){$0O.onBlur();};$0O.element=$0m;$0O.canFocus=function(){return !$0O.element.disabled;};$0O.focus=function(){$0O.element.focus();$0O.element.setSelectionRange(0,$0O.element.value.length);};$0O.save=function(){var $d={};$d[$0M.field]=$0m.value;return $d;};return $0O;},"textarea":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $0m=$0O.element;$0m.value=$0M.value;$0m.disabled=!$0M.enabled;};var $1e=document.createElement("textarea");$1e.name=$0M.field;if($0M.data.height){$1e.style.height=$0M.data.height+"px";};$1e.onkeydown=function(e){var $0n=false;switch(e.keyCode){case 13:if(e.ctrlKey||e.metaKey){$0w.doOnKey("Enter");};$0n=false;break;case 27:$0w.doOnKey("Escape");break;default:$0n=true;break;};if(!$0n){e.stopPropagation();}};$1e.oninput=function(e){$0O.onInput();};$1e.onblur=function(e){$0O.onBlur();};$0O.element=$1e;$0O.canFocus=function(){return !$0O.element.disabled;};$0O.focus=function(){$0O.element.focus();$0O.element.setSelectionRange(0,0);};$0O.save=function(){var $d={};$d[$0M.field]=$1e.value;return $d;};return $0O;},"date":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $0m=$0O.element;var $1f=$0O.picker;if($0M.data.dateFormat){$1f.pattern=$0M.data.dateFormat;};var $0D=$0M.data.locale||$0w.locale;if($0D){$1f.locale=$0D;};$0m.disabled=!$0M.enabled;$1f.date=new DayPilot.Date($0M.value);var $1g=new DayPilot.Date($0M.value).toString($0M.data.dateFormat||$1f.pattern,$1f.locale);$0m.value=$1g;};var $0m=document.createElement("input");$0m.name=$0M.field;var $1f=new DayPilot.DatePicker({$0q:$0m,$0B:"navigator_modal",$0C:$0w.zIndex+1,$1h:false,$1i:"left",$1j:function($B){$0O.onInput({"immediate":true});}});$0m.picker=$1f;$0m.className=$0w.theme+"_input_date";$0m.type="text";$0m.onkeydown=function(e){var $0n=false;switch(e.keyCode){case 13:if($1f.visible){$1f.close();}else{$0w.doOnKey("Enter");};break;case 27:if($1f.visible){$1f.close();}else{$0w.doOnKey("Escape");};break;case 9:$1f.close();$0n=true;break;default:$0n=true;break;};if(!$0n){e.preventDefault();e.stopPropagation();}};$0m.onfocus=function(){$1f.show();};$0m.onclick=function(){$1f.show();};$0m.oninput=function(e){$0O.onInput();};$0m.onblur=function(e){$0O.onBlur();};$0O.element=$0m;$0O.picker=$1f;$0O.canFocus=function(){return !$0O.element.disabled;};$0O.focus=function(){$0O.element.focus();};$0O.save=function(){var $09=$1f.date?$1f.date.toString():null;var $d={};$d[$0M.field]=$09;return $d;};return $0O;},"time":function(){return $0w.$2R($0M);},"datetime":function(){return $0w.$2S($0M);},"select":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1k=$0O.element;$1k.value=$0M.value;$1k.disabled=!$0M.enabled;};var $1k=document.createElement("select");$1k.name=$0M.field;if($0M.data.options&&$0M.data.options.forEach){$0M.data.options.forEach(function(i){var $19=document.createElement("option");$19.innerText=i.name||i.id;$19.value=i.id;$19.$2T=i.id;$1k.appendChild($19);});};$1k.onchange=function(e){$0O.onInput({"immediate":true});};$1k.onblur=function(e){$0O.onBlur();};$0O.element=$1k;$0O.canFocus=function(){return !$0O.element.disabled;};$0O.focus=function(){$0O.element.focus();};$0O.save=function(){var $09=null;var $19=$1k.options[$1k.selectedIndex];if($19&&typeof $19.$2T!=="undefined"){$09=$19.$2T;};var $d={};$d[$0M.field]=$09;return $d;};return $0O;},"searchable":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1l=$0O.searchable;$1l.disabled=!$0M.enabled;$1l.select($0M.value);};var $1l=new $1m({$H:$0M.data.options||[],name:$0M.field,$0B:$0w.theme+"_form_item_searchable",$1n:$0w.zIndex+1,$1o:function($B){if($B.ui){$0O.onInput({"immediate":true});}}});var element=$1l.create();$0O.element=element;$0O.searchable=$1l;$0O.canFocus=function(){return !$0O.searchable.disabled;};$0O.focus=function(){$0O.searchable.focus();};$0O.save=function(){var $09=$1l.selected&&$1l.selected.id;var $d={};$d[$0M.field]=$09;return $d;};return $0O;},"radio":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1p=$0O.radio;$1p.checked=$0M.checked;$1p.disabled=!$0M.enabled;};var $0N=document.createElement("label");var $1p=document.createElement("input");$1p.type="radio";$1p.name=$0M.field;$1p.$2T=$0M.resolved;$1p.onchange=function(ev){var $0M=$0O.row;$0w.findRowsByField($0M.field).forEach(function($0M){$0w.updateState($0M,{$1q:false});});$0w.updateState($0M,{$1q:true});$0w.applyState();$0O.onInput({"immediate":true});};$1p.onblur=function(e){$0O.onBlur();};$0N.appendChild($1p);var $0e=document.createTextNode($0M.text);$0N.append($0e);$0O.element=$0N;$0O.radio=$1p;$0O.canFocus=function(){return false;};$0O.focus=function(){$0O.radio.focus();};$0O.save=function(){if(!$1p.checked){return{};};var $09=$1p.$2T;var $d={};$d[$0M.field]=$09;return $d;};return $0O;},"checkbox":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1r=$0O.checkbox;$1r.checked=$0M.checked;$1r.disabled=!$0M.enabled;};var $0N=document.createElement("label");var $1r=document.createElement("input");$1r.type="checkbox";$1r.name=$0M.field;$1r.$2T=$0M.resolved;$1r.onchange=function(ev){var $0M=$0O.row;$0w.updateState($0M,{$1q:this.checked});$0w.applyState();$0O.onInput({"immediate":true});};$1r.onblur=function(e){$0O.onBlur();};$0N.appendChild($1r);var $0e=document.createTextNode($0M.text);$0N.append($0e);$0O.element=$0N;$0O.checkbox=$1r;$0O.canFocus=function(){return false;};$0O.focus=function(){$0O.checkbox.focus();};$0O.save=function(){var $09=$1r.checked;var $d={};$d[$0M.field]=$09;return $d;};return $0O;},"table":function(){var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1s=$0O.table;$1s.disabled=!$0M.enabled;$1s.load($0M.value||[]);};var $1s=new $1t({name:$0M.field,$0w:$0w,$0B:$0w.theme+"_form_item_tabular",$0y:$0M.data,$1u:function($B){$0O.onInput();}});var element=$1s.create();$0O.element=element;$0O.table=$1s;$0O.canFocus=function(){return false;};$0O.focus=function(){$0O.table.focus();};$0O.save=function(){var $09=$1s.save();var $d={};$d[$0M.field]=$09;return $d;};return $0O;}};if($0w.plugins&&$0w.plugins[$0M.type]){return $0w.plugins[$0M.type]($0M);};return $1c[$0M.type]();};Form.prototype.$2R=function($0M){var $0w=this;var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1l=$0O.searchable;$1l.disabled=!$0M.enabled;$1l.select($0M.value);};var $H=[];var $1v=$0M.data.timeInterval||15;var $1w=[1,5,10,15,20,30,60];if(!$1w.includes($1v)){$1v=15;};var $1x=60/$1v;var $1y=$0M.data.locale||$0w.locale;var $0D=DayPilot.Locale.find($1y)||DayPilot.Locale.US;var $1z=DayPilot.Date.today();for(var i=0;i<24*$1x;i++){var $1A=$1z.addMinutes($1v*i);var $0y={};$0y.name=$1A.toString($0M.data.timeFormat||$0D.timePattern,$0D);$0y.id=$1A.toString("HH:mm");$H.push($0y);};var $1l=new $1m({$H:$H,name:$0M.field,$0B:$0w.theme+"_form_item_time",$1n:$0w.zIndex+1,$1B:"startsWith",$1o:function($B){if($B.ui){$0O.onInput({"immediate":true});}}});var element=$1l.create();$0O.element=element;$0O.searchable=$1l;$0O.canFocus=function(){return !$0O.searchable.disabled;};$0O.focus=function(){$0O.searchable.focus();};$0O.save=function(){var $09=$1l.selected&&$1l.selected.id;var $d={};$d[$0M.field]=$09;return $d;};return $0O;};Form.prototype.$2S=function($0M){var $0w=this;var $0O=new $1d();$0O.apply=function($0M){$0O.row=$0M;var $1l=$0O.searchable;$1l.disabled=!$0M.enabled;var $1C=new DayPilot.Date($0M.value).toString("HH:mm");$1l.select($1C);var $0m=$0O.dateInput;var $1f=$0O.picker;if($0M.data.dateFormat){$1f.pattern=$0M.data.dateFormat;};var $1y=$0M.data.locale||$0w.locale;if($1y){var $0D=DayPilot.Locale.find($1y)||DayPilot.Locale.US;$1f.locale=$1y;$1f.pattern=$0D.datePattern;};$0m.disabled=!$0M.enabled;$1f.date=new DayPilot.Date($0M.value);var $1g=new DayPilot.Date($0M.value).toString($0M.data.dateFormat||$1f.pattern,$1f.locale);$0m.value=$1g;};var $1D=(function createDatePicker(){var $0m=document.createElement("input");$0m.name=$0M.field;var $1f=new DayPilot.DatePicker({$0q:$0m,$0B:"navigator_modal",$0C:$0w.zIndex+1,$1h:false,$1i:"left",$1j:function($B){$0O.onInput({"immediate":true});}});$0m.picker=$1f;$0m.className=$0w.theme+"_input_date";$0m.type="text";$0m.onkeydown=function(e){var $0n=false;switch(e.keyCode){case 13:if($1f.visible){$1f.close();}else{$0w.doOnKey("Enter");};break;case 27:if($1f.visible){$1f.close();}else{$0w.doOnKey("Escape");};break;case 9:$1f.close();$0n=true;break;default:$0n=true;break;};if(!$0n){e.preventDefault();e.stopPropagation();}};$0m.onfocus=function(){$1f.show();};$0m.onclick=function(){$1f.show();};$0m.oninput=function(e){$0O.onInput();};$0m.onblur=function(e){$0O.onBlur();};$0O.dateInput=$0m;$0O.picker=$1f;return $0m;})();var $1E=(function createTimePicker(){var $H=[];var $1v=$0M.data.timeInterval||15;var $1w=[1,5,10,15,20,30,60];if(!$1w.includes($1v)){$1v=15;};var $1x=60/$1v;var $1y=$0M.data.locale||$0w.locale;var $0D=DayPilot.Locale.find($1y)||DayPilot.Locale.US;var $1z=DayPilot.Date.today();for(var i=0;i<24*$1x;i++){var $1A=$1z.addMinutes($1v*i);var $0y={};$0y.name=$1A.toString($0M.data.timeFormat||$0D.timePattern,$0D);$0y.id=$1A.toString("HH:mm");$H.push($0y);};var $1l=new $1m({$H:$H,name:$0M.field,$0B:$0w.theme+"_form_item_time",$1n:$0w.zIndex+1,$1B:"startsWith",$1o:function($B){if($B.ui){$0O.onInput({"immediate":true});}}});$0O.searchable=$1l;return $1l.create();})();var element=document.createElement("div");element.className=$0w.theme+"_form_item_datetime_parent";element.appendChild($1D);element.appendChild($1E);$0O.element=element;$0O.canFocus=function(){return !$0O.searchable.disabled;};$0O.focus=function(){$0O.dateInput.focus();};$0O.save=function(){var $1F=$0O.searchable.selected&&$0O.searchable.selected.id;var $1G=$0O.picker.date?$0O.picker.date.toString():null;var $1z=new DayPilot.Date($1G).getDatePart();var $09=DayPilot.Date.parse($1z.toString("yyyy-dd-MM ")+$1F,"yyyy-dd-MM HH:mm");var $d={};$d[$0M.field]=$09;return $d;};return $0O;};Form.prototype.findRowsByField=function($08){return this.$2K.filter(function($0M){return $0M.field===$08;});};Form.prototype.findViewById=function(id,$09){return this.$2N.find(function(v){if(v.row.field===id){if(v.row.type==="radio"){return v.row.resolved===$09;}else{return true;}};return false;});};Form.prototype.firstFocusable=function(){return this.$2N.find(function(v){return v.canFocus&&v.canFocus();});};Form.prototype.updateState=function($0M,$1H){var $13=this.$2L?this.$2L:this.$2K;var $j=$13.indexOf($0M);this.$2L=$13.map(function($1I){if($1I!==$0M){return $1I;};if($0M.propsEqual($1H)){return $0M;};var $1J=$0M.clone();for(var name in $1H){$1J[name]=$1H[name];};return $1J;});return this.$2L[$j];};Form.prototype.updateInteractive=function($0M){var $j=this.$2L.indexOf($0M);this.$2N[$j].apply($0M);};Form.prototype.applyState=function(){var $0w=this;this.updateDependentState();if(!this.$2L){return;};var $1K=this.$2L.filter(function($0M,i){return $0w.$2K[i]!==$0M;});$1K.forEach(function($0M){$0w.updateInteractive($0M);});this.$2K=this.$2L;this.$2L=null;};Form.prototype.getFieldType=function($0y){var $1L=["text","date","select","searchable","radio","checkbox","table","title","image","html","textarea","scrollable","time","datetime"];if($1L.indexOf($0y.type)!==-1){return $0y.type;};if($0y.type&&this.plugins&&this.plugins[$0y.type]){return $0y.type;};if($0y.image){return "image";};if($0y.html||$0y.text){return "html";};if(!$0y.id){return "title";};if($0y.options){return "searchable";};if($0y.dateFormat){return "date";};if($0y.columns){return "table";};return "text";};Form.prototype.serialize=function(){var $d={};this.$2N.forEach(function($0O){var $1M=$0O.save();for(var name in $1M){$d[name]=$1M[name];}});return $d;};var $18=function(){this.id=this.guid();this.field=null;this.data=null;this.type=null;this.level=0;this.enabled=true;this.value=null;this.text=null;this.interactive=true;this.isValue=false;this.checked=false;this.resolved=null;};$18.prototype.clone=function(){var rm=new $18();for(var name in this){if(name==="id"){continue;};rm[name]=this[name];};return rm;};$18.prototype.propsEqual=function($1H){for(var name in $1H){if(this[name]!==$1H[name]){return false;}};return true;};$18.prototype.guid=function(){var S4=function(){return(((1+Math.random())*0x10000)|0).toString(16).substring(1);};return(""+S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4());};$18.prototype.applyValue=function(name,$09){if(this.field!==name){return;};this.value=$09;if(this.isValue&&$09===this.resolved){this.checked=true;}};var $1d=function(){this.element=null;this.canFocus=function(){return false;};this.apply=function($0M){};this.focus=function(){};this.save=function(){return{};}};function flatten($C,$d,$1N){$d=$d||{};$1N=$1N||"";for(var name in $C){var $1O=$C[name];if(typeof $1O==="object"){if(Object.prototype.toString.call($1O)==='[object Array]'){$d[$1N+name]=$1O;}else if($1O&&$1O.toJSON){$d[$1N+name]=$1O.toJSON();}else{flatten($1O,$d,$1N+name+".");}}else{$d[$1N+name]=$1O;}};return $d;};var $1m=function($u){this.data=[];this.name=null;this.theme="searchable_default";this.$2U=false;this.listZIndex=100000;this.onSelect=null;this.$2V=null;this.$2W=null;this.$2X=false;this.$2Y=null;this.$2Z=null;this.$30=[];this.$31=null;$u=$u||{};var t=this;var $1P={"selected":{$1Q:function($1R){if(typeof $1R==="object"&&$1R.id){t.$2V=$1R;}else if(typeof $1R==="string"||typeof $1R==="number"){t.select($1R);}}}};Object.defineProperty(this,"selected",{get:function(){return this.$2V;},});Object.defineProperty(this,"disabled",{get:function(){return this.$2U;},set:function($1R){this.$2U=$1R;if(this.$2Y){this.$2Y.disabled=$1R;if($1R){this.$32();}}}});for(var name in $u){if(!$1P[name]){this[name]=$u[name];}};for(var name in $u){if($1P[name]){$1P[name].post($u[name]);}}};$1m.prototype.select=function(id){this.$2V=this.data.find(function($0y){return $0y.id===id});this.$33(false);return this;};$1m.prototype.create=function(){var $1S=this;var t=this;var $02=document.createElement("div");$02.className=this.theme+"_main";$02.style.position="relative";var $1T=document.createElement("div");$1T.className=this.theme+"_icon";$1T.style.position="absolute";$1T.style.right="0";$1T.style.top="0";$1T.style.bottom="0";$1T.style.width="20px";$1T.addEventListener("mousedown",function(ev){ev.preventDefault();if($1S.$2X){$1S.focus();expand();}else{cancel();collapse();}});var $c=document.createElement("div");$c.className=this.theme+"_list";$c.style.display="none";$c.style.position="absolute";$c.style.zIndex=this.listZIndex;var $1U=document.createElement("input");$1U.type="hidden";$1U.name=this.name;$1U.searchable=t;this.$31=$1U;var $0m=document.createElement("input");$0m.type="text";$0m.className=this.theme+"_input";$0m.disabled=this.$2U;$0m.addEventListener("click",function(ev){expand();});$0m.addEventListener("focus",function(ev){filter("all");});$0m.addEventListener("input",function(ev){filter();});$0m.addEventListener("blur",function(ev){$0m.removeAttribute("readonly");cancel();});$0m.addEventListener("keydown",function(ev){if($1S.$2X){if(ev.key==="Enter"){return;};if(ev.key==="Esc"||ev.key==="Escape"){return;};expand();};if(ev.key==="ArrowDown"){var $j=t.$30.indexOf(t.$2W);if($j+1<t.$30.length){t.$2W=t.$30[$j+1];};updateHiglight();}else if(ev.key==="ArrowUp"){var $j=t.$30.indexOf(t.$2W);if($j-1>=0){t.$2W=t.$30[$j-1];};updateHiglight();}else if(ev.key==="Enter"){if($1S.$2W){ev.stopPropagation();selectOption($1S.$2W);}else{ev.stopPropagation();cancel();collapse();}}else if(ev.key==="Esc"||ev.key==="Escape"){ev.stopPropagation();cancel();collapse();}});this.$2Y=$0m;this.$2Z=$c;if(!this.$2V){this.$2V=this.data[0];if(this.$2V){$0m.value=this.$2V.name;}};function filter($1B){var $1V=$1S.strategy;if($1S.strategy!=="includes"&&$1S.strategy!=="startsWith"){$1V="includes";};$1B=$1B||$1V||"includes";$c.style.display="";$c.style.top=$0m.offsetHeight+"px";$c.style.left="0px";$c.style.width=$0m.offsetWidth+"px";$c.innerHTML="";$c.addEventListener("mousedown",function(ev){ev.preventDefault();});$1S.$2W=null;$1S.$30=[];var $0I=null;$1S.data.forEach(function($0y){var name=$0y.name||$0y.id;if($1B==="includes"){if(name.toLowerCase().indexOf($0m.value.toLowerCase())===-1){return;}}else if($1B==="startsWith"){if(name.toLowerCase().indexOf($0m.value.toLowerCase())!==0){return;}}else if($1B==="all"){};var $19=document.createElement("div");$19.className=$1S.theme+"_list_item";$19.innerText=name;$19.item=$0y;if($0y===$1S.$2V){$1S.$2W=$19;};if(!$0I){$0I=$19;};$19.addEventListener("mousedown",function(ev){selectOption($19);ev.preventDefault();});$19.addEventListener("mousemove",function(ev){if($1S.$2W===$19){return;};$1S.$2W=$19;updateHiglight({$1W:true});});$c.appendChild($19);$1S.$30.push($19);});if(!$1S.$2W){$1S.$2W=$0I;};updateHiglight();};function updateHiglight($u){$u=$u||{};var scrollIntoView=!$u.dontScroll;var $1X=document.querySelectorAll("."+$1S.theme+"_list_item_highlight");$1X.forEach(function(p){p.className=p.className.replace($1S.theme+"_list_item_highlight","");});if($1S.$2W){$1S.$2W.className+=" "+$1S.theme+"_list_item_highlight";if(scrollIntoView&&!isScrolledIntoView($1S.$2W,$c)){$1S.$2W.scrollIntoView();}}};function isScrolledIntoView($0q,$1Y){var $1Z=$0q.getBoundingClientRect();var $20=$1Y.getBoundingClientRect();return $1Z.top>=$20.top&&$1Z.bottom<=$20.bottom;};function selectOption($19){var $0y=$19.item;$1S.$2V=$0y;$1S.$33(true);hide();collapse();};function cancel(){$1S.$32();};function hide(){$1S.$34();};function collapse(){$1S.$2X=true;$0m.setAttribute("readonly","readonly");$0m.focus();};function expand(){$1S.$2X=false;$0m.removeAttribute("readonly");$0m.select();filter("all");};$02.appendChild($0m);$02.appendChild($1T);$02.appendChild($1U);$02.appendChild($c);return $02;};$1m.prototype.$32=function(){this.$34();if(!this.$2V){this.$2Y.value="";this.$33(true);}else{this.$2Y.value=this.$2V.name;}};$1m.prototype.focus=function(){this.$2X=true;this.$2Y.setAttribute("readonly","readonly");this.$2Y.focus();this.$32();};$1m.prototype.$34=function(){this.$2Z.style.display="none";};$1m.prototype.$33=function($21){this.$31.value=this.selected?this.selected.id:null;if(this.$2V){this.$2Y.value=this.$2V.name;}else{this.$2Y.value="";};if(typeof this.onSelect==="function"){var $B={$22:this,ui:$21};this.onSelect($B);}};var $1t=function($u){this.form=null;this.item=null;this.data=null;this.name=null;this.theme="edit_table_default";this.onInput=null;this.nav={};this.$35=null;this.$2K=[];$u=$u||{};for(var name in $u){this[name]=$u[name];}};$1t.prototype.create=function(){var $1s=this;var $02=document.createElement("div");$02.className=this.theme+"_main";$02.style.position="relative";var $1U=document.createElement("input");$1U.type="hidden";$1U.name=$1s.name;$1U.table=this;$02.appendChild($1U);var $23=document.createElement("div");$23.className=this.theme+"_table";var $24=this.$36();$23.appendChild($24);var $25=$1s.$37({});$25.spacer=true;var $26=this.$38($25);$26.classList.add($1s.theme+"_spacer");$23.appendChild($26);var $27=document.createElement("div");$27.className=$1s.theme+"_tbody";$23.appendChild($27);$02.appendChild($23);var $28=document.createElement("div");$02.appendChild($28);this.nav.body=$27;this.nav.table=$23;this.nav.main=$02;this.nav.after=$28;var $29=document.createElement("div");var $2a=document.createElement("span");$2a.className=this.theme+"_plus";$2a.addEventListener("click",function(ev){if($1s.disabled){return;};var $2b=$1s.item.onNewRow;var $09={};if(typeof $2b==="function"){var $B={};$B.result=$1s.form.serialize();$B.value={};$2b($B);$09=$B.value;};var $0M=$1s.$37($09);$1s.$2K.push($0M);$1s.$39();$1s.$3a();});this.nav.plus=$2a;$29.appendChild($2a);$02.appendChild($29);return $02;};$1t.prototype.$36=function(){var $1s=this;var $0M=document.createElement("div");$0M.classList.add(this.theme+"_row");$0M.classList.add(this.theme+"_header");this.item.columns.forEach(function($0y){var $2c=document.createElement("div");$2c.classList.add($1s.theme+"_cell");$2c.innerText=$0y.name;$0M.appendChild($2c);});return $0M;};$1t.prototype.$3b=function(){var $2d=this.item.max||0;if($2d&&this.$2K.length>=$2d){return true;};return false;};$1t.prototype.save=function(){var $1s=this;var $H=[];$1s.$2K.forEach(function($0M){var $0y={};$0M.cells.forEach(function($2c){$0y[$2c.id]=$2c.value;});$H.push($0y);});return $H;};$1t.prototype.load=function($H){var $1s=this;var $0o=Object.prototype.toString.call($H)==='[object Array]';if(!$0o){throw new Error("Array expected");};this.data=$H;this.$3c();this.$39();};$1t.prototype.$3d=function(){if(this.disabled){this.nav.main.classList.add(this.theme+"_disabled");}else{this.nav.main.classList.remove(this.theme+"_disabled");};var $2e=this.$3b();if($2e){this.nav.plus.classList.add(this.theme+"_plus_max");}else{this.nav.plus.classList.remove(this.theme+"_plus_max");}};$1t.prototype.$3c=function(){var $1s=this;this.$2K=[];this.data.forEach(function($2f){var $0M=$1s.$37($2f);$1s.$2K.push($0M);});};$1t.prototype.$3e=function($0M){var $1s=this;var $j=$1s.$2K.indexOf($0M);$1s.$2K.splice($j,1);};$1t.prototype.$37=function($2f){var $1s=this;var $0M={};$0M.data=$2f;$0M.cells=[];$1s.item.columns.forEach(function($2g){var id=$2g.id;var $09=$2f[id];var $16=$1s.$3f($2g);if(typeof $09==="undefined"){if($16==="text"){$09="";}else if($16==="number"){$09=0;}else if($16==="select"){var $u=$2g.options;$09=$u&&$u[0].id;}};var $2c={};$2c.id=id;$2c.value=$09;$2c.type=$16;$2c.data=$2g;$0M.cells.push($2c);});return $0M;};$1t.prototype.$3f=function($2g){var $16=$2g.type;if(!$16){if($2g.options){$16="select";}else{$16="text";}};return $16;};$1t.prototype.$39=function(){var $1s=this;this.nav.body.innerHTML="";this.nav.after.innerHTML="";this.$2K.forEach(function($0M){var el=$1s.$38($0M);$1s.nav.body.appendChild(el);});if(this.$2K.length===0){var el=$1s.$3g();$1s.nav.after.appendChild(el);};this.$3d();};$1t.prototype.$3g=function(){var $02=document.createElement("div");$02.className=this.theme+"_empty";return $02;};$1t.prototype.$38=function($0M){var $1s=this;var el=document.createElement("div");el.className=$1s.theme+"_row";$0M.cells.forEach(function($2c){var $2h=document.createElement("div");$2h.className=$1s.theme+"_cell";var $0O=$1s.$3h($2c);if($0M.spacer){var $2i=document.createElement("div");$2i.style.height="0px";$2i.style.overflow="hidden";$2i.appendChild($0O);$2h.appendChild($2i);}else{$2h.appendChild($0O);};el.appendChild($2h);});var $2c=document.createElement("div");$2c.classList.add($1s.theme+"_cell");$2c.classList.add($1s.theme+"_rowaction");var $2j=document.createElement("span");$2j.className=this.theme+"_delete";$2j.addEventListener("click",function(ev){if($1s.disabled){return;};$1s.$3e($0M);$1s.$39();$1s.$3a();});if(!$0M.spacer){$2c.appendChild($2j);};el.appendChild($2c);return el;};$1t.prototype.$3a=function(){var $1s=this;if(typeof $1s.onInput==="function"){var $B={};$1s.onInput($B);}};$1t.prototype.$3h=function($2c){var $1s=this;var $16=$2c.type;if($16==="text"||$16==="number"){var $0m=document.createElement("input");$0m.type=$16;if($1s.disabled){$0m.disabled=true;};if($2c.value){$0m.value=$2c.value;};$0m.addEventListener("keyup",function(ev){if($16==="number"){$2c.value=Number(this.value);}else{$2c.value=this.value;};$1s.$3a();});return $0m;}else if($16==="select"){var $1k=document.createElement("select");if($1s.disabled){$1k.disabled=true;};$2c.data.options.forEach(function($0y){var $19=document.createElement("option");$19.innerText=$0y.name;$19.value=$0y.id;$19.$2T=$0y.id;$1k.appendChild($19);if($2c.value===$0y.id){$19.setAttribute("selected",true);}});$1k.addEventListener("change",function(ev){var $19=$1k.options[$1k.selectedIndex];if($19&&typeof $19.$2T!=="undefined"){$2c.value=$19.$2T;};$1s.$3a();});return $1k;};throw new Error("Unsupported item type: "+$16);};$1t.prototype.focus=function(){};})(DayPilot);


