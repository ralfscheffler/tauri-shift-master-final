/**
@license
DayPilot Pro for JavaScript 2023.2.5592
Copyright (c) 2005 - 2023 Annpoint s.r.o.
https://www.daypilot.org/
Use of this software is subject to license terms.
*/
if(typeof DayPilot==='undefined'){var DayPilot={};};if(typeof DayPilot.Global==='undefined'){DayPilot.Global={};};(function(DayPilot){if(typeof DayPilot.Kanban!=='undefined'&&DayPilot.Kanban.def){return;};var $a=function(){};DayPilot.Kanban=function(id,$b){this.v='2023.2.5592;';var $c=this;this.barWidth=5;this.cardAutoHeight=true;this.cardHeight=60;this.cardMarginLeft=5;this.cardMarginRight=5;this.cardMarginBottom=5;this.columnHeaderHeight=20;this.crosshairType='Disabled';this.height=300;this.heightSpec="Auto";this.theme="kanban_default";this.cellMarginBottom=4;this.cellMarginTop=5;this.columnWidthSpec="Auto";this.columnWidth=200;this.cornerHtml=null;this.contextMenuCard=null;this.rowMinHeight=0;this.swimlaneCollapsingEnabled=false;this.swimlaneHeaderWidth=80;this.visible=true;this.swimlanes={};this.swimlanes.list=[];this.columns={};this.columns.list=[];this.cards={};this.cards.list=[];this.cardDeleteHandling="Disabled";this.cardMoveHandling="Update";this.columnMoveHandling="Disabled";this.swimlaneMoveHandling="Disabled";this.cardRightClickHandling='ContextMenu';this.onBeforeCellRender=null;this.onCardClick=null;this.onCardClicked=null;this.onCardRightClick=null;this.onCardRightClicked=null;this.onCardDelete=null;this.onCardDeleted=null;this.onCardMove=null;this.onCardMoved=null;this.onColumnMove=null;this.onColumnMoved=null;this.onHeightChanged=null;this.onSwimlaneMove=null;this.onSwimlaneMoved=null;var $d=new DayPilot.Scheduler(id);this.scheduler=$d;var $e={};var $f=15;var $g=15;$a();var $h=new DayPilot.Date("2000-01-01");$e.translate=function(){var dp=$d;dp.startDate=$h;dp.scale="Day";dp.timeHeaders=[{$i:"Cell",$j:"d"}];dp.rowHeaderColumnsMode="Legacy";dp.heightSpec=$c.heightSpec;dp.cellWidthSpec=$c.columnWidthSpec;dp.cellWidth=$c.columnWidth;dp.cellsMarkBusiness=false;dp.cornerHtml=$c.cornerHtml;dp.crosshairType=$c.crosshairType;dp.dynamicEventRendering="Disabled";dp.floatingEvents=false;dp.floatingTimeHeaders=false;dp.rowMinHeight=$c.rowMinHeight;dp.rowMarginTop=$c.cellMarginTop;dp.rowMarginBottom=$c.cellMarginBottom;dp.devsb=$c.devsb;dp.eventMoveToPosition=true;dp.headerHeight=$c.columnHeaderHeight;dp.eventResizeHandling="Disabled";dp.timeRangeSelectedHandling="Disabled";dp.eventHeight=$c.cardHeight;dp.eventMarginLeft=$c.cardMarginLeft;dp.eventMarginRight=$c.cardMarginRight;dp.eventMarginBottom=$c.cardMarginBottom;dp.eventTextWrappingEnabled=true;dp.durationBarVisible=false;dp.theme=$c.theme;dp.visible=$c.visible;dp.rowHeaderWidth=$c.swimlaneHeaderWidth;dp.contextMenu=$c.contextMenuCard;dp.eventDeleteHandling=$c.cardDeleteHandling;dp.eventMoveHandling=$c.cardMoveHandling;dp.rowMoveHandling=DayPilot.list($c.swimlanes.list).isEmpty()?"Disabled":$c.swimlaneMoveHandling;dp.eventRightClickHandling=$c.cardRightClickHandling;dp.onHeightChanged=$c.onHeightChanged;dp.internal.enableCellStacking($c.cardAutoHeight);dp.internal.cssNames.timeheadercol="_colheadercell";dp.internal.cssNames.timeheadercolInner="_colheadercell_inner";dp.internal.cssNames.resourcedivider="_rowheaderdivider";dp.internal.cssNames.event="_card";dp.internal.cssNames.eventInner="_card_inner";dp.internal.cssNames.eventDelete="_card_delete";dp.internal.cssNames.eventMovingSource="_card_moving_source";if($c.swimlaneCollapsingEnabled){dp.rowHeaderWidthMarginRight=$f+0;};dp.onBeforeTimeHeaderRender=function($k){var $l=$c.$0k($k.header.start);$k.header.html=$l.name;$k.header.toolTip=$l.toolTip||"";$k.header.areas=DayPilot.list($l.areas).map(function($m){var $n=[];DayPilot.Util.copyProps($m,$n);return $n;});DayPilot.list($k.header.areas).forEach(function($n){$n.target=new DayPilot.KanbanColumn($l,$c);});if($c.columnMoveHandling!=="Disabled"){var $o=$c.theme+"_columnmove_handle";$k.header.areas.push({"left":0,"top":0,"width":20,"height":20,"css":$o,"mousedown":$c.$0l,"action":"None"});}};dp.onBeforeCellRender=function($k){var $p={};$p.cell={};$p.cell.column=new DayPilot.KanbanColumn($c.$0k($k.cell.start),$c);$p.cell.swimlane=null;var $q=$c.$0m($k.cell.resource);if($q){$p.cell.swimlane=new DayPilot.Swimlane($q,$c);};$p.cell.areas=[];$p.cell.cssClass=null;$p.cell.html=null;$p.cell.backImage=null;$p.cell.backRepeat=null;$p.cell.backColor=null;if(typeof $c.onBeforeCellRender==="function"){$c.onBeforeCellRender($p);DayPilot.Util.copyProps($p.cell,$k.cell,["areas","cssClass","html","backImage","backRepeat","backColor"]);DayPilot.list($k.cell.areas).forEach(function($n){$n.target={"swimlane":$p.cell.swimlane,"column":$p.cell.column};})};var $r=dp.rows.find($k.cell.resource);var $s=dp.resources[$r.index];if($s.collapsed){if(!$k.cell.cssClass){$k.cell.cssClass="";};$k.cell.cssClass+=" "+$c.theme+"_collapsed";}};dp.onEventClick=function($k){var $p=new DayPilot.Args($k);$p.card=new DayPilot.Card($k.e.data.card,$c);if(typeof $c.onCardClick==="function"){$c.onCardClick($p);};$k.wrapped=$p;};dp.onEventClicked=function($k){var $p=$k.wrapped;if(typeof $c.onCardClicked==="function"){$c.onCardClicked($p);}};dp.onEventRightClick=function($k){var $p=new DayPilot.Args($k);$p.card=new DayPilot.Card($k.e.data.card,$c);if(typeof $c.onCardRightClick==="function"){$c.onCardRightClick($p);};$k.wrapped=$p;if($k.preventDefault.value){return;};var e=$k.e;var $t=$p.card;switch($c.cardRightClickHandling){case 'ContextMenu':var $u=e.client.contextMenu();if($u){$u.show($t);}else{if($c.contextMenuCard){$c.contextMenuCard.show($t);}};$k.preventDefault();break;}};dp.onEventRightClicked=function($k){var $p=$k.wrapped;if(typeof $c.onCardRightClicked==="function"){$c.onCardRightClicked($p);}};dp.onEventDelete=function($k){var $p=new DayPilot.Args($k);$p.card=new DayPilot.Card($k.e.data.card,$c);$p.control=$c;if(typeof $c.onCardDelete==="function"){$c.onCardDelete($p);};$k.wrapped=$p;};dp.onEventDeleted=function($k){DayPilot.rfa($c.cards.list,$k.e.data.card);var $p=$k.wrapped;if(typeof $c.onCardDeleted==="function"){$c.onCardDeleted($p);}};dp.onEventMove=function($k){if($k.external){$k.e.data.card={id:$k.e.data.id,name:$k.e.data.name,$v:$k.e.data.text,$w:$k.e.data.barColor,$x:$k.e.data.barBackColor};};var $p=new DayPilot.Args($k);$p.control=$c;$p.card=new DayPilot.Card($k.e.data.card,$c);$p.column=new DayPilot.KanbanColumn($c.$0k($k.newStart));$p.position=$k.position;$p.external=$k.external;if($k.newResource!=="*"){$p.swimlane=new DayPilot.Swimlane($c.$0m($k.newResource),$c);}else{$p.swimlane=null;};var $y=$d.cells.find($k.newStart,$k.newResource)[0].events();var $z=$k.position;var $A=null;var pi=$z-1;while($y[pi]){if($y[pi].data!==$k.e.data){$A=new DayPilot.Card($y[pi]);break;};pi-=1;};var $B=null;var ni=$z;while($y[ni]){if($y[ni].data!==$k.e.data){$B=new DayPilot.Card($y[ni]);break;};ni+=1;};$p.previous=$A;$p.next=$B;if(typeof $c.onCardMove==="function"){$c.onCardMove($p);};$k.wrapped=$p;$k.preventDefault();if($p.preventDefault.value){return;};switch($c.cardMoveHandling){case "Update":var $C=0;if($B){$C=$B.wrapped.data.sort[0];}else if($A){$C=$A.wrapped.data.sort[0];};$k.e.data.sort=[$C,new DayPilot.Date().toString()];DayPilot.rfa($c.cards.list,$k.e.data.card);var $D=0;if($B){$D=DayPilot.indexOf($c.cards.list,$B.data);}else if($A){$D=DayPilot.indexOf($c.cards.list,$A.data)+1;};var $l=$c.$0k($k.newStart);$k.e.data.card.column=$l.id;$k.e.data.card.swimlane=$k.newResource;$c.cards.list.splice($D,0,$k.e.data.card);$e.updateSort();$d.internal.deleteDragSource();$c.update();break;};(function moved(){var $p=$k.wrapped;var $E=DayPilot.list($c.cards.list).find(function($F){return $k.e.data.card===$F;});$E.swimlane=$p.swimlane?$p.swimlane.data.id:null;$E.column=$p.column.data.id;if(typeof $c.onCardMoved==="function"){$c.onCardMoved($p);}})();};dp.onBeforeResHeaderRender=function($k){if(!$c.swimlaneCollapsingEnabled){return;};var $G=DayPilot.list($c.swimlanes.list).isEmpty();if($G){return;};var $o=$c.theme+"_swimlane_collapse";if($k.resource.collapsed){$o=$c.theme+"_swimlane_expand";};$k.resource.areas=[{"right":0,"top":0,"height":$g,"width":$f,"action":"JavaScript","css":$o,"js":function(){$c.$0n($k.resource.index);}}];};dp.onRowMove=function($k){var $p=new DayPilot.Args($k);$p.control=$c;$k.wrapped=$p;$p.swimlane=new DayPilot.Swimlane($k.source.$.row.swimlane);var $z=0;switch($k.position){case "before":$z=$k.target.index;break;case "after":$z=$k.target.index+1;break;default:throw "Unexpected target swimlane position: "+$k.position;break;};$p.position=$z;$p.previous=null;var pi=$z-1;while($d.rowlist[pi]&&$d.rowlist[pi].swimlane!==$p.swimlane.data){$p.previous=new DayPilot.Swimlane($d.rowlist[pi].swimlane);pi-=1;};$p.next=null;var ni=$z;while($d.rowlist[ni]&&$d.rowlist[ni].swimlane!==$p.swimlane.data){$p.next=new DayPilot.Swimlane($d.rowlist[ni].swimlane);ni+=1;};if(typeof $c.onSwimlaneMove==="function"){$c.onSwimlaneMove($p);}};dp.onRowMoved=function($k){var $p=$k.wrapped;DayPilot.rfa($c.swimlanes.list,$p.swimlane.data);var $D=0;if($p.next){$D=DayPilot.indexOf($c.swimlanes.list,$p.next.data);}else if($p.previous){$D=DayPilot.indexOf($c.swimlanes.list,$p.previous.data)+1;};$c.swimlanes.list.splice($D,0,$p.swimlane.data);if(typeof $c.onSwimlaneMoved==="function"){$c.onSwimlaneMoved($p);}};dp.treePreventParentUsage=true;};$e.loadCards=function(){var $H=$c.theme+"_card_header";var $I=$c.theme+"_card_body";var $J=new DayPilot.Date().toString();$d.sortDirections=["asc","desc"];$d.events.list=DayPilot.list($c.cards.list).map(function($t,i){var $K=$t.html||$t.text||"";var name=$t.name||"";var $L={};$L.id=$t.id;$L.text=$t.text;$L.html="<div class='"+$H+"'>"+name+"</div><div class='"+$I+"'>"+$K+"</div>";$L.resource=$t.swimlane;$L.start=$h.addDays(DayPilot.list($c.columns.list).findIndex(function($F){return $t.column===$F.id;}));$L.end=$L.start.addDays(1);$L.card=$t;$L.height=$t.height;$L.cssClass=$t.cssClass;$L.sort=[i,$J];$L.areas=DayPilot.list($t.areas).map(function($F){var $M={};DayPilot.Util.copyProps($F,$M);if($F.js){$M.js=function(e){$F.js(new DayPilot.Card(e.data.card,$c));};};return $M;});$L.areas.push({"left":0,"width":5,"top":0,"bottom":0,"backColor":$t.barColor,"cssClass":$c.theme+"_card_bar"});return $L;});};$e.updateSort=function(){var $J=new DayPilot.Date().toString();DayPilot.list($c.cards.list).forEach(function($F,i){var $N=$e.findSchedulerEventData($F);if($N){$N.sort=[i,$J];}});};$e.findSchedulerEventData=function($O){return DayPilot.list($d.events.list).find(function($N){return $N.card===$O;});};$e.loadSwimlanes=function(){var $P=20;var $Q=DayPilot.list($c.swimlanes.list);$d.resources=$Q.map(function($R){var $F={};$F.name=$R.name;$F.id=$R.id;$F.swimlane=$R;if($R.collapsed){$F.collapsed=true;$F.eventHeight=$P;$F.hideEvents=true;};return $F;});if($Q.isEmpty()){$d.resources=[{name:"",id:"*"}];}};$e.loadColumns=function(){var $S=DayPilot.list($c.columns.list);$d.days=$S.length;};var $T={};$T.active=null;$T.div=null;$T.update=function(){$T.clear();var $D=$T.findPosition();$T.draw($D);};$T.clear=function(){DayPilot.de($T.div);$T.div=null;};$T.draw=function($D){var $U=0;if($D>=$d.itline.length){var $V=$d.itline[$d.itline.length-1];$U=$V.left+$V.width-3;}else{$U=$d.itline[$D].left;};var $W=document.createElement("div");$W.style.position="absolute";$W.style.left=$U+"px";$W.style.width="3px";$W.style.top=0;$W.style.height=$d.headerHeight+"px";$W.className=$c.theme+"_columnmove_position";$T.div=$W;$d.nav.timeHeader.appendChild($W);};$T.findPosition=function(){if($c.coords.x<0){return 0;};var $D=DayPilot.list($d.itline).findIndex(function($F){var $U=$F.left+$d.rowHeaderWidth;var $X=$F.width;return $c.coords.x<($U+$X/2);});if($D===-1){return $d.itline.length;};return $D;};this.$0l=function($k){$T.active=$k;};this.$0k=function($Y){return $c.columns.list[DayPilot.DateUtil.daysDiff($h,$Y)];};this.$0m=function(id){return DayPilot.list($c.swimlanes.list).find(function($F){return $F.id===id;});};this.message=function($K,$Z,$00,$01){$d.message($K,$Z,$00,$01);};this.show=function(){$c.visible=true;$d.show();};this.hide=function(){$c.visible=false;$d.hide();};this.cards.add=function($t){var $L=null;if($t&&$t instanceof DayPilot.Card){$L=$t.data;}else{$L=$t;};if(!$t){return;};$c.cards.list.push($L);$c.update();};this.cards.remove=function($t){var $L=null;if($t&&$t instanceof DayPilot.Card){$L=$t.data;}else{$L=$t;};if(!$t){return;};DayPilot.rfa($c.cards.list,$L);$c.update();};this.cards.update=function($t){$c.update();};this.cards.find=function(id){var $L=DayPilot.list($c.cards.list).find(function($F){if(id===$F.id){return true;};return false;});if(!$L){return null;};return new DayPilot.Card($L,$c);};this.$0n=function(i){if(!DayPilot.list($c.swimlanes.list).isEmpty()){$c.swimlanes.list[i].collapsed=!$c.swimlanes.list[i].collapsed;};$c.update();};this.init=function(){if(this.$0o){throw new DayPilot.Exception("This instance is already initialized. Use update() to change properties.")};$e.translate();$e.loadSwimlanes();$e.loadColumns();$e.loadCards();$d.init();$c.$0p();this.$0o=true;return this;};this.$0q=false;this.dispose=function(){$d.dispose();$c.$0q=true;};this.update=function($b){var $02=$c;if(!$02.$0o){throw new DayPilot.Exception("You are trying to update a DayPilot.Kanban instance that hasn't been initialized yet.");};if($02.$0q){throw new DayPilot.Exception("You are trying to update a DayPilot.Kanban instance that has been disposed.");};$c.$0r($b);$e.translate();$e.loadSwimlanes();$e.loadColumns();$e.loadCards();$d.update();};this.$0p=function(){DayPilot.re(document,'mouseup',$c.$0s);DayPilot.re(document,'mousemove',$c.$0t);};this.$0u={};this.$0u.scope=null;this.$0u.notify=function(){if($c.$0u.scope){$c.$0u.scope["$apply"]();}};this.$0v=null;this.$0r=function($b){if(!$b){return;};var $03={"cards":{"preInit":function(){var $04=this.data;if(!$04){return;};if(DayPilot.isArray($04.list)){$c.cards.list=$04.list;}else{$c.cards.list=$04;}}},"columns":{"preInit":function(){var $S=this.data;if(!$S){return;};if(DayPilot.isArray($S.list)){$c.columns.list=$S.list;}else{$c.columns.list=$S;}}},"swimlanes":{"preInit":function(){var $Q=this.data;if(!$Q){return;};if(DayPilot.isArray($Q.list)){$c.swimlanes.list=$Q.list;}else{$c.swimlanes.list=$Q;}}}};this.$0v=$03;for(var name in $b){if($03[name]){var $F=$03[name];$F.data=$b[name];if($F.preInit){$F.preInit();}}else{$c[name]=$b[name];}}};this.$0w=function(){var $03=this.$0v;for(var name in $03){var $F=$03[name];if($F.postInit){$F.postInit();}}};this.internal={};this.internal.loadOptions=$c.$0r;this.$0r($b);this.$0x=function(){var el=$c.nav.top;if(!el){return false;};return el.offsetWidth>0&&el.offsetHeight>0;};this.$0y=function(){var $02=$c;var $05=$02.$0x;if(!$05()&&!$02.$0z){$02.$0z=setInterval(function(){if($05()){$02.update();clearInterval($02.$0z);}},100);}};this.$0t=function(ev){$c.coords=DayPilot.mo3($d.nav.top,ev);if($T.active){$T.update();}};this.$0s=function(ev){if(!$T.active){return;};var $E=$T.active.source;var $06=$T.findPosition();var $l=$c.$0k($E.start);var $k=new DayPilot.Args();$k.column=new DayPilot.KanbanColumn($l,$c);$k.position=$06;$k.previous=null;$k.next=null;var $A=null;var $07=$k.position;while($07!==0&&!$A){if($l!==$c.columns.list[$07-1]){$A=$c.columns.list[$07-1]};$07-=1;};if($A){$k.previous=new DayPilot.KanbanColumn($A,$c);};var $B=null;$07=$k.position;while($07<$c.columns.list.length-1&&!$B){if($l!==$c.columns.list[$07]){$B=$c.columns.list[$07];};$07+=1;};if($B){$k.next=new DayPilot.KanbanColumn($B,$c);};if(typeof $c.onColumnMove==="function"){$c.onColumnMove($k);};if(!$k.preventDefault.value){if($c.columnMoveHandling==="Update"){DayPilot.rfa($c.columns.list,$k.column.data);var $D=0;if($k.next){$D=DayPilot.indexOf($c.columns.list,$k.next.data);}else if($k.previous){$D=DayPilot.indexOf($c.columns.list,$k.previous.data)+1;};$c.columns.list.splice($D,0,$k.column.data);$c.update();};if(typeof $c.onColumnMoved==="function"){$c.onColumnMove($k);}};$T.active=null;$T.clear();};};DayPilot.Kanban.makeDraggable=function($b){DayPilot.Scheduler.makeDraggable($b);};DayPilot.Card=function($L,$08){if($L instanceof DayPilot.Event){var e=$L;this.data=e.data.card;this.wrapped=$L;}else{this.data=$L;};this.control=$08;};DayPilot.KanbanColumn=function($L,$08){this.data=$L;this.control=$08;};DayPilot.Swimlane=function($L,$08){this.data=$L;this.control=$08;};(function registerAngularModule(){var $09=DayPilot.am();if(!$09){return;};$09.directive("daypilotKanban",['$parse',function($0a){return{"restrict":"E","template":"<div id='{{id}};'></div>","compile":function compile(element,$0b){element.replaceWith(this["template"].replace("{{id}};",$0b["id"]));return function link($0c,element,$0b){var $02=new DayPilot.Kanban(element[0]);$02.$0u.scope=$0c;$02.init();var $0d=$0b["id"];if($0d){$0c[$0d]=$02;};var $0e=$0b["publishAs"];if($0e){var getter=$0a($0e);var setter=getter.assign;setter($0c,$02);};for(var name in $0b){if(name.indexOf("on")===0){var $0f=DayPilot.Util.shouldApply(name);if($0f){(function(name){$02[name]=function($k){var f=$0a($0b[name]);$0c["$apply"](function(){f($0c,{"args":$k});});};})(name);}else{(function(name){$02[name]=function($k){var f=$0a($0b[name]);f($0c,{"args":$k});};})(name);}}};var $0g=$0c["$watch"];var $0h=$0b["config"]||$0b["daypilotConfig"];$0g.call($0c,$0h,function($0i,$0j){$02.$0r($0i);$02.update();},true);};}};}]);})();DayPilot.Kanban.def={};})(DayPilot);


